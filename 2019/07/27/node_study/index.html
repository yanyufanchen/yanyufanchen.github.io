<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Vue javascript jquery nodejs php">
    <meta name="description" content="
title: Nodejs后端语言学习·Node.js增删改查文件以及模块化一语言和环境之间的关系前端 和 后端​    前端主要工作

页面结构
美化页面样式
书写页面的业务逻辑
使用Ajax调用后台接口


后端主要工作

操作数据库">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Wang peng&#39;s blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.png" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">Wang peng's blog</span>
                    </a>
                </div>
                

<a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search" title="搜索"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Wang peng's blog</div>
        <div class="logo-desc">
            
            分享前端技术知识点和学习的博客站
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>

    <div class="social-link">


    <a href="mailto:xxx@xx.xx" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=123123123" class="tooltipped" data-tooltip="QQ联系我: 123123123" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
</div>

            </div>
        </div>

        
        <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>
</header>





<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/0.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }
</style>
<div class="row">
    <div class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-07-27
                </div>

                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <hr>
<h2 id="title-Nodejs后端语言学习"><a href="#title-Nodejs后端语言学习" class="headerlink" title="title: Nodejs后端语言学习"></a>title: Nodejs后端语言学习</h2><h1 id="·Node-js增删改查文件以及模块化"><a href="#·Node-js增删改查文件以及模块化" class="headerlink" title="·Node.js增删改查文件以及模块化"></a>·Node.js增删改查文件以及模块化</h1><h4 id="一语言和环境之间的关系"><a href="#一语言和环境之间的关系" class="headerlink" title="一语言和环境之间的关系"></a>一语言和环境之间的关系</h4><h5 id="前端-和-后端"><a href="#前端-和-后端" class="headerlink" title="前端 和 后端"></a>前端 和 后端</h5><p>​    前端主要工作</p>
<ol>
<li>页面结构</li>
<li>美化页面样式</li>
<li>书写页面的业务逻辑</li>
<li>使用Ajax调用后台接口</li>
</ol>
<ol>
<li><p>后端主要工作</p>
<ol>
<li>操作数据库</li>
<li>对外暴露操作数据库的API接口</li>
</ol>
</li>
<li><p>前后端协作开发</p>
<p>ECMAScript 规范</p>
</li>
</ol>
<h4 id="二-ECMAScript-规范"><a href="#二-ECMAScript-规范" class="headerlink" title="二,ECMAScript 规范"></a>二,ECMAScript 规范</h4><ol>
<li>ECMAScript 规范（标准）：就是一本书，这本书中规定了语言的特性；</li>
<li>浏览器中的js：<ul>
<li>浏览器中的 js 组成部分：ECMAScript 核心 + DOM + BOM</li>
</ul>
</li>
<li>Node中的js：<ul>
<li>Node中的 js 组成部分： ECMAScript 核心 + 全局成员 + 核心API成员</li>
<li>全局成员：console、setInterval、setTimeout。。。</li>
<li>核心 API 模块：就是 Node 平台 单独提供的一些API，这些API是Node平台所独有的；</li>
</ul>
</li>
</ol>
<h4 id="三，总结"><a href="#三，总结" class="headerlink" title="三，总结"></a>三，总结</h4><ol>
<li><p><strong>什么是 Node.js(我们自己给它下个定义)</strong></p>
<blockquote>
<p>就是一个服务器端的Javascript运行环境，可以让程序员，通过 Javascript 做 后台服务器编程开发</p>
</blockquote>
</li>
<li><p><strong>学习 Node.js 可以做什么</strong></p>
<ul>
<li>像 PHP 一样，使用 Javascript 编写符合规范的<strong>后端 API 接口</strong> 或 <strong>网站</strong></li>
<li>使用 Node.js 开发一些<strong>实用的工具</strong> 或 <strong>包</strong></li>
<li>基于 Socket 技术，开发类似于聊天室之类的<strong>即时通讯项目</strong></li>
<li>基于 Electron 环境，开发<strong>桌面软件</strong></li>
<li>ect…</li>
</ul>
</li>
</ol>
<h4 id="四、ECMAScript-6常用语法"><a href="#四、ECMAScript-6常用语法" class="headerlink" title="四、ECMAScript 6常用语法"></a>四、ECMAScript 6常用语法</h4><h5 id="4-1-let与-const"><a href="#4-1-let与-const" class="headerlink" title="4.1 let与 const"></a>4.1 let与 const</h5><ol>
<li>之前定义变量，用 var 关键字；有如下主要缺点：<ul>
<li>存在变量提升问题，降低 js 代码的可阅读性</li>
<li>没有块级作用域，容易造成变量污染</li>
</ul>
</li>
<li>let 主要特性：<ul>
<li>不存在变量提升问题，只有定义之后才能使用此变量</li>
<li>先定义再使用（暂时性死区），不可以重复定义，否则会报错</li>
<li>有 <code>{ }</code> 作用域</li>
</ul>
</li>
<li>const 主要特性：<ul>
<li>不存在变量提升问题，只有定义之后才能使用此变量</li>
<li>const 定义的<strong>常量</strong>，<em><em>无法被重新赋值</em>，因为常量无法修改，变量可修改</em></li>
<li>当定义常量的时候，必须定义且初始化（即需要赋值），否则报语法错误</li>
<li>const 定义的常量，也有 块级作用域</li>
<li>for循环里面定义的const常量，拥有独立的块级作用域，每次循环，都是一个新的作用域</li>
</ul>
</li>
</ol>
<h5 id="4-2-变量的解构赋值（常用）"><a href="#4-2-变量的解构赋值（常用）" class="headerlink" title="4.2 变量的解构赋值（常用）"></a>4.2 变量的解构赋值（常用）</h5><blockquote>
<p><strong>定义：</strong>所谓的解构赋值，就是把 某个对象中的属性，当作变量，给解放出来，这样，今后就能够当作变量直接使用了；</p>
</blockquote>
<ul>
<li>可以使用 <code>:</code>为解构出来的变量重命名</li>
</ul>
<pre><code>  // 变量的解构赋值
  定义 let user={
    name:&#39;zs&#39;,
    age:20,
    gender:&#39;男&#39;
  }
 结构赋值 const { name : name123, age, gender } = user
  name : name123相当于，把变量name的值赋值给name123
  console.log(name123)</code></pre><h5 id="4-3-箭头函数-常用"><a href="#4-3-箭头函数-常用" class="headerlink" title="4.3 箭头函数(常用)"></a>4.3 箭头函数(常用)</h5><ul>
<li>箭头函数没有自己的this，this指向<strong>定义</strong>箭头函数时所处的<strong>外部执行环境</strong>的this</li>
<li>即时调用call/apply/bind也无法改变箭头函数的this</li>
<li>箭头函数本身没有名字</li>
<li>箭头函数不能new，<strong>会报错</strong></li>
<li>箭头函数没有arguments，在箭头函数内访问这个变量访问的是<strong>外部执行环境</strong>的arguments</li>
<li>箭头函数没有prototype</li>
</ul>
<ol>
<li><p>语法：</p>
<ul>
<li><p>定义普通的 <code>function</code> 函数</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是普通 function 定义的 show 方法'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre>
</li>
<li><p>把方法定义为箭头函数（最完整的写法）</p>
<pre class=" language-js"><code class="language-js"><span class="token punctuation">(</span>形参列表<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> 函数体代码 <span class="token punctuation">}</span>
（） <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是普通 function 定义的 show 方法'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> add<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>x<span class="token operator">+</span>y<span class="token punctuation">;</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre>
</li>
</ul>
</li>
<li><p><strong>箭头函数，本质上就是一个匿名函数</strong>；</p>
</li>
<li><p><strong>箭头函数的特性</strong>： 箭头函数内部的 this, 永远和 箭头函数外部的 this 保持一致；</p>
</li>
<li><h4 id="this指向"><a href="#this指向" class="headerlink" title="this指向"></a>this指向</h4><pre class=" language-javascript"><code class="language-javascript">btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// Window</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">"red"</span> <span class="token comment" spellcheck="true">// 报错</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>使用箭头函数后</p>
<pre class=" language-javascript"><code class="language-javascript">btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// &lt;button id="btn">点击&lt;button></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">"red"</span> 
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
</li>
<li><p><strong>变体</strong>：</p>
<ul>
<li>变体1：如果箭头函数，左侧的形参列表中，只有一个参数，则，左侧小括号可以省略；</li>
<li>变体2：如果右侧函数体中，只有一行代码，则，右侧的 <code>{ }</code> 可以省略；</li>
<li>变体3：如果箭头函数左侧 只有一个 形参，而且右侧只有一行代码，则 两边的 <code>()</code> 和 <code>{}</code> 都可以省略</li>
</ul>
</li>
<li><p><strong>注意</strong>： 如果我们省略了 右侧函数体的 <code>{ }</code>，那么，默认会把 右侧函数体中代码的执行结果，当作箭头函数的调用结果 return 出去；</p>
</li>
</ol>
<h5 id="4-4对象中定义属性和方法"><a href="#4-4对象中定义属性和方法" class="headerlink" title="4.4对象中定义属性和方法"></a>4.4对象中定义属性和方法</h5><p>使用快捷方式定义属性和方法</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">"zs"</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">22</span>
<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是zs'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/* let person = {
      name: name,
      age: age,
      show: show
}
console.log(person) // {name: 'zs', age: 22, show: [Function: show]} */</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">,</span>
  age<span class="token punctuation">,</span>
  show<span class="token punctuation">,</span>
  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ok"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// { name: 'zs', age: 22, show: [Function: show], say: [Function: say]} *</span></code></pre>
<h4 id="五，fs文件操作"><a href="#五，fs文件操作" class="headerlink" title="五，fs文件操作"></a>五，fs文件操作</h4><p>1，fs.readFile</p>
<p>// 调用 fs.readFile 方法时，提供的第一个参数是相对路径，容易出现问题</p>
<p>推荐使用 node 中提供的 <code>__dirname</code> 来解决 fs 模块操作文件时候的路径问题</p>
<pre class=" language-javascript"><code class="language-javascript">fs<span class="token punctuation">.</span>readFile读取文件
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//引入模块,默认就已经运行了'fs'</span>
<span class="token comment" spellcheck="true">// fs 核心模块中，提供了 fs.readFile 方法， 来读取指定目录下的文件</span>
<span class="token comment" spellcheck="true">// fs.readFile 有三个参数</span>
<span class="token comment" spellcheck="true">// 参数1： 表示要读取的文件路径</span>
<span class="token comment" spellcheck="true">// 参数2： 表示要以什么样的编码格式，来读取指定的文件，默认编码格式为null</span>
<span class="token comment" spellcheck="true">// 参数3：当文件读取完成，调用这个callback回调函数来处理读取的结果</span>
<span class="token comment" spellcheck="true">//       其中，第一个参数是error对象，第二个参数才是读取的结果</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/1.txt'</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//err为null，就证明成功了</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//读取的数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/1.txt'</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取成功+'</span>data'<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//读取的数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>    </code></pre>
<p>如果读取一个不存在的文件</p>
<p>// 读取文件失败：ENOENT：no such file or directory, open’…’</p>
<p>2,fs.writeFile</p>
<pre class=" language-javascript"><code class="language-javascript">写入文件
<span class="token comment" spellcheck="true">// 1. 导入 fs 文件操作模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 2. 调用 fs.writeFIle 写入文件</span>
<span class="token comment" spellcheck="true">// 参数1：路径字符串，表示要把文件内容，写入到哪个文件中</span>
<span class="token comment" spellcheck="true">// 参数2：要写入的数据，可以给定一个 字符串</span>
<span class="token comment" spellcheck="true">// 参数3：可选参数，表示要以什么格式写入文件内容， 默认以 utf8 格式写入文件 【一般默认不传递第三个参数】</span>
<span class="token comment" spellcheck="true">// 参数4：文件写入完成之后的 callback 回调函数</span>
<span class="token comment" spellcheck="true">//       在回调函数中，只有一个形参，err错误对象</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./files/2.txt'</span><span class="token punctuation">,</span> <span class="token string">'222'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入文件失败！'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件写入成功！'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>改造成箭头函数</p>
<pre class=" language-javascript"><code class="language-javascript">fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./files/2.txt'</span><span class="token punctuation">,</span> <span class="token string">'222'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入文件失败！'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件写入成功！'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>如果在写入时，文件不存在，就直接写入，如果文件以及存在，就直接覆盖原来的内容。</p>
<p>3，fs.appendFile</p>
<pre class=" language-javascript"><code class="language-javascript">追加文件
<span class="token comment" spellcheck="true">// 1. 导入 fs 文件操作模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 2. 调用 fs.appendFile 追加文件内容</span>
<span class="token comment" spellcheck="true">// 参数1： 表示要向哪个文件中追加内容，指定一个文件的路径</span>
<span class="token comment" spellcheck="true">// 参数2： 表示要追加的具体的内容，可以传递的字符串内容</span>
<span class="token comment" spellcheck="true">// 参数3： 可选参数，表示 追加文本内容时候的编码格式 ，如果省略此参数，默认以 utf8</span>
<span class="token comment" spellcheck="true">// 参数4： 表示 追加完成之后的回调函数</span>
<span class="token comment" spellcheck="true">//        形参err表示追加失败之后的错误结果，如果err为null，表示追加成功</span>
fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./files/2.txt'</span><span class="token punctuation">,</span> <span class="token string">'\n333'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'追加文件失败！'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'追加文件成功！'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>如果追加的文件路径不存在</p>
<pre class=" language-javascript"><code class="language-javascript"> x fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./files/ssss.txt'</span><span class="token punctuation">,</span> <span class="token string">'\n333'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'追加文件失败！'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'追加文件成功！'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// 如果要追加的文件路径不存在，则会先尝试创建这个文件，然后再向文件中追加内容</span></code></pre>
<p>4, __dirname</p>
<p>使用fs模块操作文件的时候，如果提供的操作路径是 相对路径，</p>
<p>​    则会根据当前执行node命令时的磁盘目录，去拼接提供的文件的相对路径，从而容易出现问题，例如</p>
<pre class=" language-javascript"><code class="language-javascript">获取当前js文件路径
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 调用 fs.readFile 方法时，提供的第一个参数是相对路径，容易出现问题</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/1.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取文件失败！'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>  
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取文件成功！'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>注意：在node中， __dirname 表示当前这个文件，所处的目录</p>
<p>​    比较完整的一次调用</p>
<pre class=" language-javascript"><code class="language-javascript">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/files/1.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
要读取的文件，直接在当前文件下 __dirname，后面进行拼接指定的具体路径</code></pre>
<p><strong>5，__</strong>dirname 和 __filename 的区别</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// __dirname 表示 当前这个文件执行的时候，所处的根目录  只是代表一层目录而已；</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// __filename 表示 当前这个文件的完整路径，路径中包含了具体 的文件名</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span></code></pre>
<p>6，fs.stat</p>
<pre class=" language-javascript"><code class="language-javascript">读取指定路径的文件信息fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span>如大小，创建时间，等<span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/files/1.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 3 (3个字节)</span>
    <span class="token comment" spellcheck="true">// 获取文件创建时间</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span>birthtime<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 2018年6月7日  18:19:11   2018-06-07T10:19:11.186Z</span>
    <span class="token comment" spellcheck="true">// 判断当前是不是一个文件</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span>isFile<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// true </span>
    <span class="token comment" spellcheck="true">// 判断是不是一个目录</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span>isDirectory<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// false   </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>7.fs.copyFile</p>
<pre class=" language-javascript"><code class="language-javascript">复制文件fs<span class="token punctuation">.</span>copyFile
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/files/1.txt'</span><span class="token punctuation">,</span> __dirname <span class="token operator">+</span> <span class="token string">'/files/1-copy.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'拷贝失败：'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'拷贝成功！'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>如果目标文件以及存在，就把目标文件给覆盖</p>
<p>fs.readdir (path[, options], callback(err,files))读取文件夹里面的文件信息，会吧所有的文件已数组形式返回文件名称</p>
<h4 id="六，path路径操作"><a href="#六，path路径操作" class="headerlink" title="六，path路径操作"></a>六，path路径操作</h4><p>1 path.join</p>
<pre class=" language-javascript"><code class="language-javascript"> path<span class="token punctuation">.</span>join  方法使用平台特定的分隔符作为定界符将所有给定的 path 片段连接在一起，然后规范化生成的路径。
<span class="token comment" spellcheck="true">// 最佳实践：以后只要涉及到路径拼接，一定要使用 path.join() 方法</span>
<span class="token keyword">const</span> path<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./files/1.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> dataStr<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>2 其他方法</p>
<p>path.seq</p>
<p>​    获取分隔符</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>sep<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// \   :在windows中都是反斜线              </span></code></pre>
<p>path.basename(path)</p>
<p>​    path.basename() 方法返回一个 path 的最后一个部分                  </p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/foo/bar/baz/asdf/quux.html'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// quux.html</span></code></pre>
<p>path.dirname(path)</p>
<p>​    获取文件目录</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'c:/a/b/c/1.txt'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// c:/a/b/c</span></code></pre>
<p>path.extname()</p>
<p>​    获取文件扩展名</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'c:/a/b/c/1.txt'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// .txt    </span></code></pre>
<p>​    总结：path提供了更多路径相关的方法    </p>
<ul>
<li>不用担心不同系统斜线的问题                     </li>
<li>拼接相对路径更加方便，可以逐级拼接，可以向上级目录拼接</li>
</ul>
<h4 id="七，单线程和异步（重点）"><a href="#七，单线程和异步（重点）" class="headerlink" title="七，单线程和异步（重点）"></a>七，单线程和异步（重点）</h4><blockquote>
<h4 id="javascript的解析和执行一直是单线程的，但是宿主环境（浏览器或者node）是多线程的"><a href="#javascript的解析和执行一直是单线程的，但是宿主环境（浏览器或者node）是多线程的" class="headerlink" title="javascript的解析和执行一直是单线程的，但是宿主环境（浏览器或者node）是多线程的"></a>javascript的解析和执行一直是单线程的，但是宿主环境（浏览器或者node）是多线程的</h4></blockquote>
<p>​    异步任务是由宿主环境开启子线程完成，并通过<strong>事件驱动、回调函数、队列</strong>，把完成的任务，交给主线程执行  </p>
<p>​    javascript引擎，一直在做一个工作，就是<strong>从任务队列里提取任务，放到主线程里执行</strong>  </p>
<pre><code> **JS线程**拿到一份代码，会一行一行的执行，并不关心回调，并且会把回调扔给**其他线程**。当回调的条件满足时，其他线程会把回调推到一个叫 “**异步队列**” 的地方，等待被执行。每次JS线程把 “这一轮（事件循环）” 代码执行完成后，就称为一次事件循环，本次事件循环完成后，会去检查“异步队列”里的回调，如果有回调在等候，拿出其中第一个，继续以上逻辑，进入下一轮事件循环。</code></pre><ul>
<li>浏览器的渲染发生在事件循环之间  </li>
<li>给某个函数a传入回调，并执行a，回调是否异步取决于a本身怎么调用回调  </li>
</ul>
<h5 id="1-异步执行任务的好处"><a href="#1-异步执行任务的好处" class="headerlink" title="1 异步执行任务的好处"></a>1 异步执行任务的好处</h5><p>​    作用：要把耗时的操作放到异步中执行 </p>
<p>​    好处：能够提高耗时任务执行的效率，提高主线程的速度，提高js解析引擎的工作效率</p>
<h4 id="八，-模块化"><a href="#八，-模块化" class="headerlink" title="八， 模块化"></a>八， 模块化</h4><p>​    模块化是一种开发思想，是社区的开发者为了统一规范拟定的策  </p>
<h5 id="1，-什么是模块化"><a href="#1，-什么是模块化" class="headerlink" title="1， 什么是模块化"></a>1， 什么是模块化</h5><pre><code>   这些都是社区制定出来的模块规范，目的都是一样的，都是为了解决javascript没有模块化系统的问题，他们都有如何定义模块成员，以及模块成员之间如何进行通信交互的规则  </code></pre><blockquote>
<h5 id="CMD-Common-Module-Definition-模块定义规范，"><a href="#CMD-Common-Module-Definition-模块定义规范，" class="headerlink" title="CMD (Common Module Definition) 模块定义规范，"></a>CMD (Common Module Definition) 模块定义规范，</h5></blockquote>
<pre><code>   就是API，别人约定好的东西，已经有实现, 国人制作的规范  </code></pre><p>​    CMD其实就是SeaJS这个模块加载器在推广过程中定义的一个模块规范  </p>
<blockquote>
<h5 id="AMD-Asynchronous-Module-Definition-，异步模块加载机制"><a href="#AMD-Asynchronous-Module-Definition-，异步模块加载机制" class="headerlink" title="AMD(Asynchronous Module Definition)，异步模块加载机制"></a>AMD(Asynchronous Module Definition)，异步模块加载机制</h5></blockquote>
<pre><code>   与CMD的API极其相似，几乎一样，老外制作的规范</code></pre><p>​    AMD其实就是RequireJS这个模块加载器推广过程中定义的一个模块规范</p>
<blockquote>
<h5 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h5></blockquote>
<p>​            NodeJS中的模块化解决方案，也是一些API</p>
<blockquote>
<h5 id="ECMAScript-6"><a href="#ECMAScript-6" class="headerlink" title="ECMAScript 6"></a>ECMAScript 6</h5></blockquote>
<pre><code>   这几个模块的开发者互相看不起，所以又出现了‘百家争鸣’

   2015年9月份，ECMAScript官方推出了ECMAScript 6语言标准，在最新的ES6语言规范标准中，已经制定了JavaScript模块化规范，‘export import’，不过前端喜欢追赶新技术，甚至把没有推出来的标准都直接用上生产环境</code></pre><h5 id="2-什么是CommonJS规范"><a href="#2-什么是CommonJS规范" class="headerlink" title="2 什么是CommonJS规范"></a>2 什么是CommonJS规范</h5><p>是一套javascript的模块化规范，规定了 模块的特性 和 各模块之间如何相互依赖</p>
<p>​    特点：同步加载模块，不适合在浏览器端使用</p>
<p>​    要了解三个成员，</p>
<p>​        module是个对象表示当前这个模块</p>
<p>​        require是方法用来导入模块</p>
<p>​        exports是一个对象用来暴露成员</p>
<blockquote>
<h5 id="在浏览器端，适合使用异步的模块，比如AMD或者CMD"><a href="#在浏览器端，适合使用异步的模块，比如AMD或者CMD" class="headerlink" title="在浏览器端，适合使用异步的模块，比如AMD或者CMD"></a>在浏览器端，适合使用异步的模块，比如AMD或者CMD</h5></blockquote>
<h5 id="3-全局作用域和模块作用域"><a href="#3-全局作用域和模块作用域" class="headerlink" title="3 全局作用域和模块作用域"></a>3 全局作用域和模块作用域</h5><p>​    全局作用域使用 global 来访问，类似于浏览器中的window</p>
<h5 id="global在模块之间共享成员"><a href="#global在模块之间共享成员" class="headerlink" title="global在模块之间共享成员"></a>global在模块之间共享成员</h5><p>​    一般在企业中<strong>不推荐使用</strong>，因为会存在全局变量污染问题</p>
<p>​    每个javascript文件</p>
<h5 id="模块作用域"><a href="#模块作用域" class="headerlink" title="模块作用域"></a>模块作用域</h5><p>​    以下表示两个js文件</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment" spellcheck="true">// 注意：每个 js 文件，都是一个独立的作用域</span>
<span class="token comment" spellcheck="true">//      外界在 require 这个 js 文件的时候，默认无法访问 js 文件中的任何私有成员</span></code></pre>
<p>​    第二个文件</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 注意：这是 程序员使用require 导入自己的js模块</span>
<span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./01.模块1.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// a is not defined</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// {}</span></code></pre>
<p>module（模块标识）</p>
<p>​    module属性是CommonJS规范中定义的，它是一个对象，表示一个具体的js模块；</p>
<p>require（引用模块）</p>
<p>​    每一个实现了CommonJS规范的模块，必须定义一个require()函数</p>
<p>​    require(‘路径’)</p>
<p>​    使用这个require函数，就能够很方便的导入其他 模块中的成员，供自己使用</p>
<p>exports（暴露模块成员）</p>
<p>​    每一个模块中，如果想要把自己的一些私有成员，暴露给别人使用，那么，必须实现一个module.exports对象</p>
<p>​    通过exports对象，可以方便的把模块内私有的成员，暴露给外界使用</p>
<pre class=" language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// exports 默认是属于 module</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// {}</span>

<span class="token comment" spellcheck="true">// 默认在一个模块中，向外暴露成员，需要使用 module.exports</span>
<span class="token comment" spellcheck="true">// 在模块中，如果要导入其他模块，需要使用require</span></code></pre>
<p>使用模块作用域暴露成员</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span>
<span class="token keyword">var</span> say <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>a <span class="token operator">=</span> a
exports<span class="token punctuation">.</span>b <span class="token operator">=</span> b
exports<span class="token punctuation">.</span>say <span class="token operator">=</span> say</code></pre>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./05.m1.js'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// console.log(m1)</span>
<span class="token comment" spellcheck="true">// {a: 10}</span>
<span class="token comment" spellcheck="true">// console.log(m1)</span>
<span class="token comment" spellcheck="true">// {a: 10, b: 20}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// {a: 10, b: 20, say: [Function: say]}</span></code></pre>
<p>6 module.exports 和 exports</p>
<p>​    module.exports 和 exports 默认引用了同一个空对象</p>
<pre class=" language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>exports<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">===</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports <span class="token operator">===</span> exports<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// true</span></code></pre>
<p>​    module.exports 和 exports 作用一致，都可以向外暴露成员</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span>

exports<span class="token punctuation">.</span>a <span class="token operator">=</span> a
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>b <span class="token operator">=</span> b</code></pre>
<p>​    在另外一个文件中，找到该对象</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./07.test1.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// {a: 10, b: 20}</span></code></pre>
<p>​    一个模块作用域中，向外暴露私有成员时，永远以 module.exports 为准</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span>

<span class="token comment" spellcheck="true">// 没有以对象的方式赋值, 而是直接改写</span>
exports <span class="token operator">=</span> a 
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> b</code></pre>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./07.test1.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// {20}</span></code></pre>
<blockquote>
<h5 id="！！！为了防止一些不必要的情况发生，在开发中，推荐使用-module-exports"><a href="#！！！为了防止一些不必要的情况发生，在开发中，推荐使用-module-exports" class="headerlink" title="！！！为了防止一些不必要的情况发生，在开发中，推荐使用 module.exports"></a>！！！为了防止一些不必要的情况发生，在开发中，推荐使用 module.exports</h5></blockquote>
<h4 id="九，node-js中的模块和包的概念"><a href="#九，node-js中的模块和包的概念" class="headerlink" title="九，node.js中的模块和包的概念"></a>九，node.js中的模块和包的概念</h4><h5 id="1，模块成员分类"><a href="#1，模块成员分类" class="headerlink" title="1，模块成员分类"></a>1，模块成员分类</h5><p>​    模块成员，根据一些区别，又可以分为三大类： 核心模块、第三方模块、用户自定义模块</p>
<p>​    核心模块：node.js安装包自带的内置模块require(‘核心模块名字’)</p>
<p>​    第三方模块：非官方提供的，可在NPM网站下载使用require(‘第三方模块名字’)</p>
<p>​    用户自定义模块：用户自己项目中写的js文件，使用require(‘路径+文件名’)</p>
<h1 id="·Node-js全局本地包以及web服务器创建"><a href="#·Node-js全局本地包以及web服务器创建" class="headerlink" title="·Node.js全局本地包以及web服务器创建"></a>·Node.js全局本地包以及web服务器创建</h1><h4 id="一、包"><a href="#一、包" class="headerlink" title="一、包"></a>一、包</h4><p>​    1、定义</p>
<p>​    在模块的基础上进一步深层抽象的文件夹，里面包含了关于使用它的各种文件</p>
<p>​    2,、结构</p>
<p>​    包都要以一个单独的目录而存在</p>
<p>​    package.json必须在包的顶层目录下</p>
<p>​    package.json必须要符合JSON格式，并且必须包含如下三个属性：</p>
<p>​        name：包的名字</p>
<p>​        version：包的版本号</p>
<p>​        main：表示包的入口文件</p>
<p>​    二进制文件应该在bin目录下，javascript代码应该在bin目录下，文档应该在doc目录下，单元测试应该在test目录下</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*
    name: 包的名称，必须是唯一
    description：包的简要说明
    version：符合语义化版本识别规范的版本字符串
    keywords：关键字数据，通常用于搜索
    maintainers： 维护者数组，每个元素都要包含name、email、web可选字段
    contributors：贡献者数组，格式与maintainers相同，包的作者应该是贡献者数据的第一个元素
    bugs：提交bug的地址，可以是网址或者电子邮件地址
    licenses：许可证数组，每个元素要包含type和url字段
    repositories：仓库托管地址数组，每个元素要包含type、url和path字段
    dependencies：包的依赖，一个关联数组，由包名称和版本号组成
    devDependencies：开发者依赖项，表示一个包在开发期间用到的依赖项
*/</span></code></pre>
<p>​        在lib中添加了功能js之后，main.js负责导入并暴露成员</p>
<p>​        导入const add = require(‘./add.js’)</p>
<p>​        暴露module.exports = {add}</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 在导入包的时候，require的名字，必须是包文件夹的名字，而且只有把包放在 node_modules目录中才可以直接使用名称</span>
<span class="token keyword">const</span> calc <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'calc'</span><span class="token punctuation">)</span></code></pre>
<h4 id="二、npm"><a href="#二、npm" class="headerlink" title="二、npm"></a>二、npm</h4><p>​    npm是一个第三方模块的托管网站，指的就是 ‘<a href="https://www.npmjs.com&#39;" target="_blank" rel="noopener">https://www.npmjs.com&#39;</a></p>
<p>​    npm是node的节点包管理器工具，安装node软件的时候，就已经自动安装了这个管理工具</p>
<p>​    nrm是节点资源管理</p>
<p>​    nrm ls   资源下载网站</p>
<p>​    修改资源下载网站 nrm use cnpm     （nrm use taobao） —–nrm use  网站名</p>
<p>​    测试网站响应速度nrm test 网站名</p>
<p>​    包名   -v  查看包的版本</p>
<h5 id="1，安装和卸载全局包-i5ting-toc"><a href="#1，安装和卸载全局包-i5ting-toc" class="headerlink" title="1，安装和卸载全局包(i5ting_toc)"></a>1，安装和卸载全局包(i5ting_toc)</h5><p>​        （1）安装： npm install(简写i) 包名 -g       =&gt;  -g指的是全局，不加就为本地</p>
<p>​        （2）运行： 包名 -f      路径</p>
<p>​        （3）卸载： npm uninstall(简写un)  包名  -g </p>
<pre><code>npm install i5ting_toc -g  //安装

i5ting_toc -f ./node基础_day02.md   //运行

npm uninstall i5ting_toc -g   //卸载</code></pre><pre><code>需要安装的包
npm i nrm -g   ------   安装nrm包，用于修改下载包的网站
npm install i5ting_toc -g  ------安装i5ting_toc包
cnpm i nodemon -g     ------安装nodemon包
npm i gulp -g
npm i router -g -----安装路由模块
npm cache clean --force    ------清除缓存
</code></pre><p>##### </p>
<h5 id="2-安装和卸载本地包"><a href="#2-安装和卸载本地包" class="headerlink" title="2 安装和卸载本地包"></a>2 安装和卸载本地包</h5><p>跟着项目安装的包叫做本地包，本地包都会被安装到 node_modules 目录下</p>
<p>（1）创建：空文件夹项目需要在根目录，运行npm init或者 npm init -y命令，    初始化一个package.json的配置文件，否则包无法安装到本地项目中 </p>
<p>(2)安装：npm i 包名  –save(简写-S,如果npm是5.x以上版本，可以不写–save)</p>
<p>（3）package-lock.json 文件中记录了曾经装过的包下载地址，方便下次直接下载包，能够加快装包的速度，提升装包体验</p>
<p>（4）卸载：npm uninstall/remove 包名 -s/-D 即可卸载指定的本地包</p>
<pre><code>npm i  检索package 下载所有依赖包
需要安装的本地包jquery
art-template
express框架
ejs模板引擎 
mysql数据库
semantic-ui框架
npm i express-session   安装session
npm i cors -S    后台安装跨域模块</code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*
    --save 的缩写是 -S
    --save-dev 的缩写是 -D
    install 的缩写是 i
    dependencies 节点，表示项目上线部署时候需要的依赖项
    devDependencies节点，表示项目在开发阶段需要的依赖项，但是当项目要部署上线了，这里的包就不需要了

    当使用npm i快速装包的时候，npm会检查package.json文件中，所有的依赖项，然后安装到项目中
    --production 表示只安装dependencies节点记录的包，不安装devDependencies节点下的包，一般项目上线才用
*/</span></code></pre>
<p>初始化： package.json</p>
<p>npm init -y</p>
<h4 id="三、http模块–web服务器创建"><a href="#三、http模块–web服务器创建" class="headerlink" title="三、http模块–web服务器创建"></a>三、http模块–web服务器创建</h4><p>​    在node中，不需要apache一样的web容器</p>
<p>​    B/S：特指基于浏览器和服务器这种交互形式</p>
<h5 id="1、创建服务器"><a href="#1、创建服务器" class="headerlink" title="1、创建服务器"></a>1、创建服务器</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 1.0 导入http核心模块</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 2.0 创建web服务器对象</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 创建服务器</span>
<span class="token comment" spellcheck="true">// 3.0 绑定事件，监听请求</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// req表示客户端相关参数</span>
      <span class="token comment" spellcheck="true">// res表示和服务器相关的参数和方法 </span>
  设置响应报文头的Content<span class="token operator">-</span>Type，来指定响应内容的编码类型，从而防止乱码
  text<span class="token operator">/</span>html<span class="token operator">--</span><span class="token operator">--</span>文档类型，返回页面不需要设置响应头，因为html页面有申明
 res<span class="token punctuation">.</span><span class="token function">writeHeader</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'text/html; charset=utf-8'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 3.1 end方法可以返回数据</span>
      <span class="token comment" spellcheck="true">//req.url可以获取用户请求的url地址，如index</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 4.0 启动服务，设置ip地址和端口</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'3000'</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server runnig at 127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h5 id="2、模板引擎渲染页面"><a href="#2、模板引擎渲染页面" class="headerlink" title="2、模板引擎渲染页面"></a>2、模板引擎渲染页面</h5><pre class=" language-javascript"><code class="language-javascript">npm init <span class="token operator">-</span>y<span class="token comment" spellcheck="true">//初始化</span>
npm i art<span class="token operator">-</span>template<span class="token comment" spellcheck="true">//安装模板引擎</span></code></pre>
<p>后端内容</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> template <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'art-template'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> url <span class="token operator">=</span> req<span class="token punctuation">.</span>url
    <span class="token keyword">if</span><span class="token punctuation">(</span>url <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment" spellcheck="true">// 使用模板渲染页面</span>
          <span class="token comment" spellcheck="true">// 参数1：要渲染的HTML页面的路径，</span>
          <span class="token comment" spellcheck="true">// 参数2：要渲染的数据，没有数据的话，给一个 {} 对象</span>
          <span class="token comment" spellcheck="true">// 返回值：渲染好的HTML内容，直接通过res.send发送给客户端</span>
          <span class="token keyword">const</span> htmlStr <span class="token operator">=</span> <span class="token function">template</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/views/1.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span>
          age<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
          hobby<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'吃饭'</span><span class="token punctuation">,</span> <span class="token string">'唱歌'</span><span class="token punctuation">,</span> <span class="token string">'跳舞'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'3000'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is running at 127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>前端内容</p>
<p>​    模板引擎的语法</p>
<pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>这是一个动态渲染的页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span><span class="token punctuation">></span></span> 通过 Node 服务器，结合 art-template 模板引擎渲染的动态页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>姓名： {{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>年龄： {{ age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>爱好： 
        {{ each hobby }}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>{{ $value }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        {{ /each }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<h1 id="·Express框架，"><a href="#·Express框架，" class="headerlink" title="·Express框架，"></a>·Express框架，</h1><p>​    Express框架是一个基于Node.js的框架，对http模块进行了更强大的封装</p>
<p>​    也就是不再使用之前的http模块，而是使用express的方式处理  <strong>请求</strong></p>
<p>​    <code>npm i express -S</code></p>
<h4 id="1-使用express快速创建服务器"><a href="#1-使用express快速创建服务器" class="headerlink" title="1  使用express快速创建服务器"></a>1  使用express快速创建服务器</h4><ul>
<li>通过 <code>app.get()</code> 或 <code>app.post()</code> 方法，来监听客户端的 <code>get</code> 或 <code>post</code> 请求，具体语法：<ul>
<li><strong>监听 <code>GET</code> 请求：</strong><code>app.get(&#39;请求地址&#39;, (req, res) =&gt; { 处理函数 })</code> </li>
<li><strong>监听 <code>POST</code> 请求：</strong> <code>app.post(&#39;请求地址&#39;, (req, res) =&gt; { 处理函数 })</code> </li>
</ul>
</li>
<li><strong>启动 express 服务器：</strong>通过 <code>app.listen(端口, IP地址, 启动成功后的回调函数)</code> 启动服务器；</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 1.0 导入模块</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 2.0 创建web服务器app对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 3.0 app.get方法，监听用户请求，指定用户请求的地址和回调函数</span>
app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// res.end('hello world.') 不能直接识别中文，需要写响应头</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'你好世界。'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 4.0 启动服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server running at http://127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h4 id="2-快捷方法"><a href="#2-快捷方法" class="headerlink" title="2 快捷方法"></a>2 快捷方法</h4><p>​    res.send([body|status], [body])   发送内容</p>
<p>​    即既可以直接发送内容，也可以第一个参数状态，第二个参数内容。</p>
<p>​    如果直接发送内容的话，状态会被自动补全；</p>
<p>简单来说就是   如果服务器端没有数据返回到客户端 那么就可以用 res.end</p>
<p>但是 如果 服务器端有数据返回到客户端 这个时候必须用res.send ,不能用 res.end（会报错）</p>
<p><strong>发送的内容：</strong></p>
<p>示例：</p>
<pre><code>res.send(newBuffer(&#39;whoop&#39;)); 发送二进制(binary)内容，Content-Type 会被                            设置为 &quot;application/octet-stream&quot; ，
res.send({ some: &#39;json&#39; });
res.send(&#39;some html&#39;);    假如发送字符串，那么将被解释为html文件；
                        也就是说，Content-Type 默认设置为&quot;text/html&quot;:
res.send(404, &#39;Sorry, we cannot find that!&#39;);
res.send(500, { error: &#39;something blew up&#39; });
res.send(200);    假如参数为Array（数组），或者Ojbect（对象），那么将返回                    一个JSON；</code></pre><p>res.sendFile()  发送页面</p>
<ul>
<li>用法1：<code>res.sendFile(path.join(__dirname, &#39;./view/index.html&#39;))</code></li>
<li>用法2：<code>res.sendFile(&#39;./view/movie.html&#39;, { root: __dirname })</code></li>
<li>注意：<code>res.sendFile()</code> 可以向浏览器发送 静态页面；</li>
</ul>
<h4 id="3-托管静态资源文件"><a href="#3-托管静态资源文件" class="headerlink" title="3 托管静态资源文件"></a>3 托管静态资源文件</h4><p>​    app.use() 是注册中间件</p>
<p>​    express.static() 是中间件的一种，()里面指定托管的静态目录，目录中包含要访问的页面，可以直接被访问</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 1. express.static() 可以把指定目录托管为静态目录，这样请求的页面可以直接访问</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span><span class="token string">'./views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 2. 指定虚拟目录   127.0.0.1:3000/public/views/index.html</span>
<span class="token comment" spellcheck="true">// app.use('public', express.static('./views'))</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server running at http://127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h4 id="4基于-express的模板引擎ejs"><a href="#4基于-express的模板引擎ejs" class="headerlink" title="4基于 express的模板引擎ejs"></a>4基于 express的模板引擎ejs</h4><p><code>npm i ejs -S</code></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 1.0 设置模板引擎的方式</span>
app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 2.0 设置veiws指向模板文件的目录</span>
app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./ejs_pages'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 3.0 调用response的render，参数1：模板文件路径，参数2：数据对象</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index.ejs'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'ls'</span><span class="token punctuation">,</span> 
        age<span class="token punctuation">:</span> <span class="token number">108</span><span class="token punctuation">,</span> 
        hobby<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'majoog'</span><span class="token punctuation">,</span> <span class="token string">'kongfu'</span><span class="token punctuation">,</span> <span class="token string">'food'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>​    index.ejs 模板文件</p>
<pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie<span class="token punctuation">=</span>edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>这是ejs渲染的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>姓名：&lt;%= name %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>年龄：&lt;%= age %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>爱好：
        &lt;% hobby.forEach(item => { %>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>&lt;%= item %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">})</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<h4 id="5art-template模板"><a href="#5art-template模板" class="headerlink" title="5art-template模板"></a>5art-template模板</h4><pre><code>npm i art-template express-art-template -S</code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 1.0 定义模板引擎的名称</span>
app<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-art-template'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 2.0 定义模板引擎的方式</span>
app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'html'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 3.0 定义views指向的渲染目录</span>
app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./art_pages'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 4.0 调用render方法进行渲染</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span>
        age<span class="token punctuation">:</span> <span class="token number">38</span><span class="token punctuation">,</span>
        books<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'三国演义'</span><span class="token punctuation">,</span> <span class="token string">'红楼梦'</span><span class="token punctuation">,</span> <span class="token string">'西游记'</span><span class="token punctuation">,</span> <span class="token string">'名侦探柯南'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie<span class="token punctuation">=</span>edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>这里是art-template渲染的模板数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>姓名： {{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>年龄： {{ age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
        四大名著
        {{ each books }}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>{{ $index }} ---  {{ $value }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        {{ /each }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<h4 id="6封装路由模块"><a href="#6封装路由模块" class="headerlink" title="6封装路由模块"></a>6封装路由模块</h4><p>在开发中，经常会使用分模块开发，在不同的模块处理不同的业务，比如像处理客户端请求这个事情，是很繁琐的，所以不需要在主文件中进行，而转交一个路由模块处理</p>
<h5 id="1-服务模块"><a href="#1-服务模块" class="headerlink" title="1 服务模块"></a>1 服务模块</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 1.0 导入路由模块</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./07.router.js'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 2.0 使用路由功能</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server running at 127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h5 id="2-路由模块07-router-js-被使用的外部文件"><a href="#2-路由模块07-router-js-被使用的外部文件" class="headerlink" title="2 路由模块07.router.js(被使用的外部文件)"></a>2 路由模块07.router.js(被使用的外部文件)</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 1.0 创建路由对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 2.0 使用路由对象的方法处理客户端请求</span>
router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">'./views/index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> root<span class="token punctuation">:</span> __dirname <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/movie'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">'./views/movie.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> root<span class="token punctuation">:</span> __dirname <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">'./views/about.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> root<span class="token punctuation">:</span> __dirname <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 3.0 向外暴露模块</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router</code></pre>
<h4 id="7中间件"><a href="#7中间件" class="headerlink" title="7中间件"></a>7中间件</h4><h5 id="1-五种中间件"><a href="#1-五种中间件" class="headerlink" title="1 五种中间件"></a>1 五种中间件</h5><ul>
<li>应用级别中间件</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//应用级别中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Time:'</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<ul>
<li>路由级别中间件</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//路由级别中间件</span>
router<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Time:'</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<ul>
<li><p>错误处理中间件</p>
<p>回调函数中，有四个参数 <code>app.use((err, req, res, next)=&gt;{})</code></p>
</li>
<li><p>唯一内置中间件</p>
</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span><span class="token string">'./views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<ul>
<li><strong>第三方中间件</strong>（由个人/第三方开发的中间件）</li>
</ul>
<h5 id="2-中间件案例"><a href="#2-中间件案例" class="headerlink" title="2 中间件案例"></a>2 中间件案例</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 导入处理查询字符串的模块</span>
<span class="token keyword">const</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 1.0 定义中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> dataStr <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token comment" spellcheck="true">// 1.1 注册data事件，接收数据片段chunk</span>
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> chunk <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        dataStr <span class="token operator">+</span><span class="token operator">=</span> chunk
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">// 1.2 注册end事件，代表请求结束，打印数据，并且调用next方法执行后续操作</span>
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span>
        <span class="token comment" spellcheck="true">// 把 username=ls&amp;password=123456 解析成 {username: 'ls', password: 123456}</span>
      <span class="token comment" spellcheck="true">//***将get得到的字符串参数，分割成一个对象****</span>
      <span class="token comment" spellcheck="true">//querystring.parse()</span>
        <span class="token keyword">let</span> obj <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span>
        <span class="token comment" spellcheck="true">//将处理得到的obj通过req.body挂载</span>
        req<span class="token punctuation">.</span>body <span class="token operator">=</span> obj
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 应用级别的中间件</span>
<span class="token comment" spellcheck="true">// 2.0 处理开始的请求根目录页面文件</span>
app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">'./09-form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>root<span class="token punctuation">:</span> __dirname<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 3.0 通过form表单发送一个post请求</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/postdata'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//得到上个中间件处理得到的数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'假如说这是请求之后的页面'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie<span class="token punctuation">=</span>edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>演示中间件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/postdata<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
            用户名： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
            密码： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<h4 id="8数据库连接和操作"><a href="#8数据库连接和操作" class="headerlink" title="8数据库连接和操作"></a>8数据库连接和操作</h4><p>在操作数据库之前，需要启动 PHPstudy， 因为它内部集成了mysql的环境</p>
<h5 id="1-在数据库中新建数据"><a href="#1-在数据库中新建数据" class="headerlink" title="1 在数据库中新建数据"></a>1 在数据库中新建数据</h5><p>​    1， 连接数据库，连接名随便取</p>
<p>​    2，创建数据库，数据库名是连接的时候需要的名称</p>
<p>​    3，创建表，名字慎重，因为操作的就是这个表名</p>
<h5 id="2-创建数据库连接和查询"><a href="#2-创建数据库连接和查询" class="headerlink" title="2 创建数据库连接和查询"></a>2 创建数据库连接和查询</h5><pre><code>npm i mysql -S</code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> conn <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    host<span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
    user<span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
    password<span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
    database<span class="token punctuation">:</span> <span class="token string">'hangzhou01'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 3.0 调用查询语句  参数1：sql语句  参数2：回调函数</span>
<span class="token keyword">const</span> sqlStr1 <span class="token operator">=</span> <span class="token string">'select * from users'</span>
<span class="token comment" spellcheck="true">// ！！！注意，这里第二个参数是回调函数</span>
conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr1<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'查询失败，原因是：'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h5 id="3-新增"><a href="#3-新增" class="headerlink" title="3 新增"></a>3 新增</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> user <span class="token operator">=</span>  <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'小黄'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span> gender<span class="token punctuation">:</span> <span class="token string">'女'</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> sqlStr2 <span class="token operator">=</span> <span class="token string">'insert into users set ?'</span>
<span class="token comment" spellcheck="true">// ！！！ 这里函数接收的第二个参数是 第一条数据的名称</span>
conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr2<span class="token punctuation">,</span> user<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'新增失败，原因是：'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h5 id="4-修改"><a href="#4-修改" class="headerlink" title="4 修改"></a>4 修改</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> user <span class="token operator">=</span>  <span class="token punctuation">{</span>id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'小绿'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> sqlStr3 <span class="token operator">=</span> <span class="token string">'update users set ? where id = ?'</span>
<span class="token comment" spellcheck="true">// ！！！这里传入的第二个参数是一个数组，并且要和上面的数组一一对应上</span>
conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr3<span class="token punctuation">,</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> user<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'修改失败，原因是：'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h5 id="5-删除"><a href="#5-删除" class="headerlink" title="5 删除"></a>5 删除</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> user <span class="token operator">=</span>  <span class="token punctuation">{</span>id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'小绿'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> sqlStr2 <span class="token operator">=</span> <span class="token string">'delete from users where id = ?'</span>
<span class="token comment" spellcheck="true">// ！！！这里的第二个参数是对应的id</span>
conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr2<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除失败，原因是：'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h1 id="模块加载机制以及req的方法"><a href="#模块加载机制以及req的方法" class="headerlink" title="模块加载机制以及req的方法"></a>模块加载机制以及req的方法</h1><h4 id="模块加载机制"><a href="#模块加载机制" class="headerlink" title="模块加载机制"></a>模块加载机制</h4><p>模块引入时，会先执行一遍，然后放入内存中，</p>
<p>任何模块加载前都会先去缓存查找</p>
<p>如果缓存中没有，就去文件/文件夹中查找，(如果加载没有后缀名的文件，即模糊查找)</p>
<p>① <strong>文件</strong>模糊查找规则：</p>
<ol>
<li><p>无后缀的文件</p>
</li>
<li><p><code>.js</code>后缀的文件</p>
</li>
<li><p><code>.json</code>后缀的文件</p>
</li>
<li><p><code>.node</code>后缀的文件</p>
<p>查找机制——如：index=&gt;index.js=&gt;index.json=&gt;index.node</p>
</li>
</ol>
<p>② <strong>文件夹</strong>内搜索规则：</p>
<ol>
<li>文件夹根目录中的 <code>package.json</code>的<code>main</code>字段指定的文件</li>
<li>文件夹根目录中以 <code>index</code> 为关键字进行文件模糊查找 ①</li>
</ol>
<ul>
<li><code>require(&#39;test&#39;)</code><ul>
<li>是否是核心模块</li>
<li>在node_modules中以 <code>test</code> 为关键字进行文件模糊查找  ①</li>
<li>在node_modules中对 <code>test</code> 文件夹进行搜索  ②</li>
<li>在上一级目录的node_modules中重复上面的步骤</li>
</ul>
</li>
<li><code>require(&#39;./test.js&#39;)</code><ul>
<li>是否有此文件</li>
</ul>
</li>
<li><code>require(&#39;./test&#39;)</code><ul>
<li>在指定的目录中以 <code>test</code> 为关键字进行文件模糊查找 ①</li>
<li>在指定的目录中对 <code>test</code> 文件夹进行搜索  ②</li>
</ul>
</li>
<li><code>require(&#39;./test/&#39;)</code><ul>
<li>在指定的目录中对 <code>test</code> 文件夹进行搜索  ②</li>
</ul>
</li>
</ul>
<h4 id="req方法"><a href="#req方法" class="headerlink" title="req方法"></a>req方法</h4><p>1 req.query获取查询参数</p>
<p><code>npm init -y</code></p>
<p>​    <code>npm i express -S</code></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server running at http://127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>2.2 req.params获取路径参数</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/:id/:name'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server running at http://127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>req.body获取POST请求表单数据</p>
<p>​    <code>npm i body-parser -S</code></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span>extended<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//如果是true则支持嵌套的urlencoded数据，就是允许接收嵌套数据，如对象/数组</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server running at http://127.0.0.1:3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h1 id="跨域及解决办法"><a href="#跨域及解决办法" class="headerlink" title="跨域及解决办法"></a>跨域及解决办法</h1><h4 id="1，跨域"><a href="#1，跨域" class="headerlink" title="1，跨域"></a>1，跨域</h4><p><strong>浏览器</strong>在给后端发送<strong>ajax请求</strong>的时候，如果触犯下列条件之一，就会涉及到跨域问题。</p>
<ol>
<li>协议不同</li>
<li>域名不同</li>
<li>端口不同</li>
</ol>
<p>跨域的限制只存在于浏览器中，脱离浏览器的环境发送请求则不存在跨域的限制</p>
<h4 id="2，JSONP和CORS的区别"><a href="#2，JSONP和CORS的区别" class="headerlink" title="2，JSONP和CORS的区别"></a>2，JSONP和CORS的区别</h4><ol>
<li>JSONP的原理：动态创建script标签；</li>
</ol>
<ul>
<li>JSONP发送的不是Ajax请求</li>
<li>不支持 Post 请求；</li>
</ul>
<ol>
<li>CORS中文意思是<code>跨域资源共享</code> ,需要服务器端进行 <code>CORS</code> 配置；</li>
</ol>
<ul>
<li>服务器按照<code>CORS</code>的规则进行响应后，前端发出跨域的Ajax请求响应时，就不会再被浏览器拦截，可以正常获取数据 ；</li>
</ul>
<ol>
<li><p>对于Node来说，如果想要开启 CORS 跨域通信，只需要安装<code>cors</code>的模块即可；</p>
</li>
<li><p>如果出现跨域，那么需要在 <strong>后端项目</strong> 的 server.js 中下载 cors 模块，并且导入</p>
<p>​    <code>npm i cors -S</code></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 导入cors模块</span>
<span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>​</p>
</li>
</ol>
<h4 id="node-js操控数据库"><a href="#node-js操控数据库" class="headerlink" title="node.js操控数据库"></a>node.js操控数据库</h4><p>// 导入数据库模块，创建数据库连接<br>const mysql = require(‘mysql’)<br>const conn = mysql.createConnection({</p>
<pre class=" language-javascript"><code class="language-javascript">host<span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
user<span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
password<span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
database<span class="token punctuation">:</span> <span class="token string">'node_item'</span></code></pre>
<p>})</p>
<p>获取数据</p>
<p> let sqlStr = ‘SELECT * FROM heros’</p>
<pre class=" language-javascript"><code class="language-javascript">conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
        status<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span> 
        msg<span class="token punctuation">:</span> err<span class="token punctuation">.</span>message<span class="token punctuation">,</span> 
        data<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">// 4.2 返回请求的数据</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
        status<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> 
        msg<span class="token punctuation">:</span> <span class="token string">'ok'</span><span class="token punctuation">,</span> 
        data<span class="token punctuation">:</span> result 
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>添加数据</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 导入解析表单post提交时传输的数据</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 使用中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> extended<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//sql语句</span>
<span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">'insert into heros set ?'</span>
<span class="token comment" spellcheck="true">//执行数据库</span>
conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>获取前台得到的数据req<span class="token punctuation">.</span>body<span class="token punctuation">,</span>callback<span class="token punctuation">)</span></code></pre>
<p>获取指定数据</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">'SELECT * FROM heros WHERE id = ?'</span></code></pre>
<p>根据id修改数据</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">'update heros set ? where id = ?'</span></code></pre>
<p>软删除数据（修改特定的状态）</p>
<pre class=" language-javascript"><code class="language-javascript"> <span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">'update heros set isdel = 1 where id = ?'</span></code></pre>
<h1 id="semantic-ui框架"><a href="#semantic-ui框架" class="headerlink" title="semantic-ui框架"></a>semantic-ui框架</h1><h3 id="全局安装Gulp"><a href="#全局安装Gulp" class="headerlink" title="全局安装Gulp"></a>全局安装Gulp</h3><p>​    <code>npm i gulp -g</code></p>
<p><img src="file:///F:/item/%E5%B0%B1%E4%B8%9A%E7%8F%AD/day45-nodejs/%E7%AC%94%E8%AE%B0/images/downGulp.jpg?lastModify=1562504352" alt="img"></p>
<h3 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h3><p>​    <code>npm init -y</code></p>
<p><img src="file:///F:/item/%E5%B0%B1%E4%B8%9A%E7%8F%AD/day45-nodejs/%E7%AC%94%E8%AE%B0/images/web-init.jpg?lastModify=1562504390" alt="img"><img src="images%5Cweb-init.jpg" alt="web-init"></p>
<h3 id="6-3-下载semantic-ui"><a href="#6-3-下载semantic-ui" class="headerlink" title="6.3 下载semantic-ui"></a>6.3 下载semantic-ui</h3><p>​    <code>npm i semantic-ui -S</code></p>
<p><img src="images%5Cautosemantic.jpg" alt="autosemantic"></p>
<p><img src="file:///F:/item/%E5%B0%B1%E4%B8%9A%E7%8F%AD/day45-nodejs/%E7%AC%94%E8%AE%B0/images/autosemantic.jpg?lastModify=1562504404" alt="img"></p>
<h3 id="6-4-进程操作"><a href="#6-4-进程操作" class="headerlink" title="6.4 进程操作"></a>6.4 进程操作</h3><p><img src="file:///F:/item/%E5%B0%B1%E4%B8%9A%E7%8F%AD/day45-nodejs/%E7%AC%94%E8%AE%B0/images/semantic-yes.jpg?lastModify=1562504414" alt="img"></p>
<p><img src="file:///F:/item/%E5%B0%B1%E4%B8%9A%E7%8F%AD/day45-nodejs/%E7%AC%94%E8%AE%B0/images/semantic-ok.jpg?lastModify=1562504414" alt="img"></p>
<p><img src="file:///F:/item/%E5%B0%B1%E4%B8%9A%E7%8F%AD/day45-nodejs/%E7%AC%94%E8%AE%B0/images/semantic-all.jpg?lastModify=1562504438" alt="img"></p>
<h3 id="6-5-使用gulp工具完成操作"><a href="#6-5-使用gulp工具完成操作" class="headerlink" title="6.5 使用gulp工具完成操作"></a>6.5 使用gulp工具完成操作</h3><p>​    <code>cd semantic</code></p>
<p>​    <code>gulp build</code></p>
<p><img src="file:///F:/item/%E5%B0%B1%E4%B8%9A%E7%8F%AD/day45-nodejs/%E7%AC%94%E8%AE%B0/images/semantic-gulp.jpg?lastModify=1562504450" alt="img"></p>
<h3 id="在项目中配置和使用semantic-ui"><a href="#在项目中配置和使用semantic-ui" class="headerlink" title="在项目中配置和使用semantic-ui"></a>在项目中配置和使用semantic-ui</h3><p>​    在项目中配置 semantic-ui ，其实就是让 views 目录里面的html文件引入外面文件夹的文件</p>
<p>​        如果是直接在 views 里面，由于托管了，所以不需要再设置什么</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 托管 views 文件夹下的文件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span><span class="token string">'./views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 托管 semantic 文件夹里的静态资源</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/semantic'</span><span class="token punctuation">,</span> express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span><span class="token string">'./semantic'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/node_modules'</span><span class="token punctuation">,</span> express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span><span class="token string">'./node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3001</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server running at http://127.0.0.1:3001'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>说明</p>
<p>​    将 views 文件夹托管了，那么在访问页面的时候</p>
<p>​    本应该是 <code>127.0.0.1:3001/views/index.html</code></p>
<p>​    现在访问方式 <code>127.0.0.1:3001</code></p>
<p>​    原因是托管出去的文件夹，在请求文件的时候，语法不允许再写这个文件夹</p>
<h1 id="总结MVC三层之间的调用关系"><a href="#总结MVC三层之间的调用关系" class="headerlink" title="总结MVC三层之间的调用关系"></a>总结MVC三层之间的调用关系</h1><h4 id="封装-controller-业务处理模块"><a href="#封装-controller-业务处理模块" class="headerlink" title="封装 controller 业务处理模块"></a>封装 controller 业务处理模块</h4><p>​    封装的目的是为了保证每个模块的职能单一性，对于路由模块来说，</p>
<p>​    只需要分配 url 地址到 处理函数之间的关系，而不需要关心处理请求的具体实现</p>
<h4 id="MVC-三层架构开发思想"><a href="#MVC-三层架构开发思想" class="headerlink" title="MVC 三层架构开发思想"></a>MVC 三层架构开发思想</h4><p>​    M: Model 数据库操作层</p>
<p>​    V: View 页面视图层</p>
<p>​    C: Controller 业务处理层</p>
<p>​    M: Model 数据库操作层</p>
<p>​    V: View 页面视图层</p>
<p>​    C: Controller 业务处理层</p>
<p><img src="file://F:%5Citem%5C%E5%B0%B1%E4%B8%9A%E7%8F%AD%5Cday45-nodejs%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cmvc.jpg?lastModify=1562505441" alt="img"></p>
<p>​    在 views 文件夹里面创建适合自己的模板页面，在页面中涉及到逻辑交互或者事件，发送异步请求</p>
<p>​    在 router 文件夹中 去挂载对应关系，去监听每一个请求，处理请求找到业务处理函数</p>
<p>​    在业务处理层 controller 中需要连接数据库， 那么再去请求 db 文件夹中的模块</p>
<p>​    在 views 文件夹里面创建适合自己的模板页面，在页面中涉及到逻辑交互或者事件，发送异步请求</p>
<p>​    在 router 文件夹中 去挂载对应关系，去监听每一个请求，处理请求找到业务处理函数</p>
<p>​    在业务处理层 controller 中需要连接数据库， 那么再去请求 db 文件夹中的模块</p>
<h1 id="Cookie-和-Session"><a href="#Cookie-和-Session" class="headerlink" title="Cookie 和 Session"></a>Cookie 和 Session</h1><h4 id="Cookie-的基本使用"><a href="#Cookie-的基本使用" class="headerlink" title="Cookie 的基本使用"></a>Cookie 的基本使用</h4><p>//http是无状态的，浏览器在看到响应头里有set-cookie这个字段，会自动把相应的值存在cookie中<br>// 1. 定义：cookie 就是存储在客户端（浏览器）的一小段文本<br>// 2. cookie 是一门客户端的技术，因为 cookie 是存储在客户端的<br>// 3. cookie 的作用，是为了实现 客户端与 服务器端之间的状态保持<br>// 4. cookie 技术不安全，不要使用它保存一些 敏感数据<br>浏览器看到响应头里的set-cookie字段，会自动把相应的值存储在浏览器的cookie中<br>浏览器再次发起请求是，会默认自动在请求头的cookie字段带上此域名下的所有cookie</p>
<h3 id="使用-Cookie-的-expires"><a href="#使用-Cookie-的-expires" class="headerlink" title="使用 Cookie 的 expires"></a>使用 Cookie 的 expires</h3><p>​    如果响应头不设置过期时间，那么此cookie 是一个临时cookie，默认只在浏览器页面关闭之后就失效了，</p>
<p>如果想指定 cookie 的时效，就是过期时间，到了过期时间，浏览器就自动<strong>删除</strong>当前cookie ，</p>
<p>响应头返回的data字段以及cokie中expires设置的时间时间都是服务器时间，</p>
<p>​    需要指定 cookie 的 expires 属性</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 设置 cookie</span>
<span class="token keyword">const</span> expiresTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
res<span class="token punctuation">.</span><span class="token function">writeHeader</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'text/html; charset=utf-8'</span><span class="token punctuation">,</span>
    <span class="token string">'Set-Cookie'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'isvisit=yes; expires='</span> <span class="token operator">+</span> expiresTime<span class="token punctuation">,</span> <span class="token string">'test=ook'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h3 id="Session-的原理"><a href="#Session-的原理" class="headerlink" title="Session 的原理"></a>Session 的原理</h3><p>​    <img src="file:///F:/item/%E5%B0%B1%E4%B8%9A%E7%8F%AD/day45-nodejs/%E7%AC%94%E8%AE%B0/images/Session.png?lastModify=1562505525" alt="img"></p>
<h3 id="在项目中安装-express-session"><a href="#在项目中安装-express-session" class="headerlink" title="在项目中安装 express-session"></a>在项目中安装 express-session</h3><p>​    </p>
<h4 id="步骤1：安装模块和导入"><a href="#步骤1：安装模块和导入" class="headerlink" title="步骤1：安装模块和导入"></a>步骤1：安装模块和导入</h4><p>​    <code>npm i express-session -S</code></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-session'</span><span class="token punctuation">)</span></code></pre>
<h4 id="步骤2：使用中间件"><a href="#步骤2：使用中间件" class="headerlink" title="步骤2：使用中间件"></a>步骤2：使用中间件</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//设置cookie的过期时间</span>
<span class="token keyword">const</span> expiresTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">160</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span> 
<span class="token comment" spellcheck="true">// 启用 session 中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  secret<span class="token punctuation">:</span> <span class="token string">'keyboard cat'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 相当于一个加密钥匙，值可以是任意字符串</span>
  resave<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 强制 session 保存到 session store 中</span>
  saveUninitialized<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 强制没有'初始化'的 session 保存到 storage 中</span>
  <span class="token comment" spellcheck="true">//添加入cookie的过期时间</span>
  cookie<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        expires<span class="token punctuation">:</span> expiresTime
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<h4 id="步骤3：保存到session"><a href="#步骤3：保存到session" class="headerlink" title="步骤3：保存到session"></a>步骤3：保存到session</h4><p>​    将私有的数据保存到当前请求的 session 会话中：</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 将登录的用户保存到 session 中</span>
req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>user <span class="token operator">=</span> result<span class="token punctuation">.</span>dataValues
<span class="token comment" spellcheck="true">// 设置是否登录为 true</span>
req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>isLogin <span class="token operator">=</span> <span class="token boolean">true</span></code></pre>
<h4 id="步骤4：清空数据的方法"><a href="#步骤4：清空数据的方法" class="headerlink" title="步骤4：清空数据的方法"></a>步骤4：清空数据的方法</h4><p>​    通过 destroy() 方法清空 session 数据</p>
<pre class=" language-javascript"><code class="language-javascript">req<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'用户退出成功'</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">// 实现服务器的跳转，这个对比于客户端的跳转</span>
    res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>抽离公共模块到单独的页面，然后引入</p>
<pre><code>&lt;%- include(&#39;./layout/header.ejs&#39;) %&gt;

    &lt;h1&gt;文章列表&lt;/h1&gt;

&lt;%- include(&#39;./layout/footer.ejs&#39;) %&gt;</code></pre><h1 id="抽离公共模块的方法"><a href="#抽离公共模块的方法" class="headerlink" title="抽离公共模块的方法"></a>抽离公共模块的方法</h1><!--在引入页面-->
<div class="footer"></div>

<p>/<em>导入脚部页面</em>/<br>$(document).ready(function(){<br>   $(“.footer”).load(“page/footer.html”);<br>});</p>
<!--抽离footer.html页面，做被引入页面-->
<footer>
   <ul class="g-flex">
​      <li><a href="#">活动XXX</a></li>
​      <li><a href="#">列表XXX</a></li>
​      <li><a href="#">产权XXX</a></li>
​      <li><a href="#">我们XXX</a></li>
   </ul>
</footer>
            </div>
            <hr/>

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff;
        background-color: #22AB38;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff;
        background-color: #019FE8;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs">
                        <li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li>
                        <li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#reward .reward-link').on('click', function () {
            $('#rewardModal').openModal();
        });

        $('#rewardModal .close').on('click', function () {
            $('#rewardModal').closeModal();
        });
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                    </span>
                    <a href="http://yoursite.com" class="b-link-green">Wang peng's blog</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2019/07/27/node_study/" class="b-link-green"></a>
                </p>
            </div>
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-dot-circle-o"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2019/07/27/node_study/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="">
                        
                        <span class="card-title"></span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">
title: Nodejs后端语言学习·Node.js增删改查文件以及模块化一语言和环境之间的关系前端 和 后端​    前端主要工作

页面结构
美化页面样式
书写页面的业务逻辑
使用Ajax调用后台接口


后端主要工作

操作数据库</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2019-07-27
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-user fa-fw"></i>
                            Peng Wang
                            
                        </span>
                    </div>
                </div>

                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2019/07/27/git_study/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="代码托管工具教程-gitHub">
                        
                        <span class="card-title">代码托管工具教程-gitHub</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">配置使用者的用户名和邮箱 ··04 git config --list查看
配置全局用户名 命令 git config --global user.name &#39;klxin&#39;
配置全局用户邮箱 git config --glo</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2019-07-27
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-user fa-fw"></i>
                            Peng Wang
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    </div>
    <div class="col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>
    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            本站由&copy;<a href="https://blinkfox.github.io/" target="_blank">Blinkfox</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 的
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建.

            

            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                </span>
                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:xxx@xx.xx" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=123123123" class="tooltipped" data-tooltip="QQ联系我: 123123123" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input" autofocus="">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->



    <script src="/libs/others/clicklove.js"></script>


    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


</body>
</html>